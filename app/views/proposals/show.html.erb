<%# raise %>
<div class="container">
  <div class="d-flex justify-content-between" id="chat-room-full">
    <div id="chat-box w-75">
      <h2> <%= current_user.typehelper == false ? "Chat with #{@proposal.user.firstname} for your #{@project.title}": "Your proposal for #{@project.user.firstname}'s #{@project.title}" %> project </h2>
      <div class="chat-console overflow-auto message-container" data-proposal-id="<%= @proposal.id %>">
        <h5> <%=@proposal.user.firstname%> would like to take on your project, you can interact with this helper below ðŸ™‚ </h5>
        <br>
        <div class="message" style="text-align:center;" data-proposal-id="<%= @proposal.id %>" >
          <p> <strong> <%=@proposal.user.firstname%>: <%=@proposal.pitch%> </strong> </p>
        </div>
        <% @proposal.messages.each do |message| %>
        <div class="message" style="<%= message.user == current_user ? "text-align:left; color: #07689f; font-weight:bold" : "text-align:right;" %>" id="message-<%=message.id%>">
          <p> <%= message.user.firstname %>: <%= message.content %> </p>
        </div>
        <%end%>
      </div>
      <%= simple_form_for [ @proposal, @messages ], remote: true do |f| %>
      <%= f.input :content, label: false, autofocus: true, input_html: { :autocomplete => "off" } %>
      <% end %>
    </div>
    <div id="other-projects">
      <h4 > <%= current_user.typehelper == true ? "Your other proposals" : "Your other projects" %>:</h4>
      <div id="projects-box">
        <ul>
          <% if current_user.typehelper == true %>
            <% current_user.proposals.each do |proposal| %>
            <li><%= proposal.project.title %> </li>
            <% end %>
          <% else %>
            <% @projects.each do |project| %>
            <li> <%= project.title if project != @project %> </li>
            <% end %>
          <% end %>
        </ul>
      </div>
    </div>
  </div>
</div>
